<app-subheader selectedMenuName="Edit API Token" [actions]="menubarItems" backRoute="/apitokens"></app-subheader>

<app-delete [visible]="visibleDialog" [items]="[{'id': apitoken.id}]" [itemLabel]="'pipeline'" [idField]="'id'"
(deleteConfirmed)="onDelete()" (cancel)="visibleDialog = false"></app-delete>

<div class="main-content" [style]="{'margin-top': '120px'}">
  <div class="formgrid grid" style="display: inline-block;">
    <div class="field col-12 mt-2">
      <div>API Token ID: <b>{{ apitoken.id }}</b></div>
      <small>Permanent identifier of the token</small>
    </div>
    <div class="field col-12 mt-2">
      <div class="mb-2"><label for="durationId">Valid for (days)</label></div>
      <p-inputNumber id="durationId" [min]="0" [(ngModel)]="apitoken.duration" class="text-base"/>
    </div>
    <div class="field col-12 mt-2">
      <div class="mb-2"><label for="apitokenStateId">State</label></div>
      <select [(ngModel)]="apitoken.state" id="apitokenStateId" class="input_field border-1 border-round">
          <option value="1">Valid</option>
          <option value="3">Suspended</option>
          <option value="5">Revoked</option>
      </select>
    </div>
    <div class="field col-12 mt-2">
      <div class="mb-2"><label for="tokenId">Token</label></div>
      <div id="tokenId" class="text-base p-2 token">{{ apitoken.token }} </div>
    </div>
    <div class="field col-12 mt-2">
      <div class="mb-2"><label for="description">Description</label></div>
      <input
        id="description"
        type="text"
        pInputText
        [(ngModel)]="apitoken.description"
        class="text-base p-2 w-full"
      />
    </div>
    <div class="field col-12 mt-4">
      <button pButton (click)="onSubmit()" class="button">Update</button>
    </div>
  </div>
</div>
